<template name='main'>
	{{> nav}}
	{{> flashMessages}}
	{{> yield}}
	<p> </p>
	<hr />
	{{> footer}}
</template>

<template name='home'>
	<div class="container">
	    {{> shortenbar}}
	    <p></p>
	    {{#if urlSess}}
	    	{{! Comments: pass urlSess to inner template}}
    		{{> currentLink urlSess}}
	    {{/if}}
	    {{#if currentUser}}
	    	{{> linklist}}
	    {{else}}
	        {{> toplinks}}
	        <p>Want to track all your Lis, please <a href="{{pathFor route='login'}}">login</a> or <a href="{{pathFor route='register'}}">register</a>!</p>
	    {{/if}}
    </div>
</template>


<template name="urlForm">
<form>
  <p>Please input your link here:</p>
  <input type="text" size="100" maxlength="256" name="longUrl">
  <input type="submit" value="Short It">
</form>
<table class="table table-hover">
{{#if currentUser}}
	<thead>
	  <tr>
	    <th>Long Url</th>
	    <th>CreatedAt</th>
	    <th>Short Url</th>
	  </tr>
	</thead>
    {{#if urlForCurUser}}
	  {{#each urlForCurUser}}
	    <tbody>
		  <tr>
		    <td>
		      <a target='_blank' href="{{long}}">
		        {{long}}
		      </a>
		    </td>
		    <td>{{formatDate createdAt}}</td>
		    <td>
		      <a target='_blank' href="{{appendToBaseUrl short}}">
		        {{appendToBaseUrl short}}
		      </a>
		    </td>
		  </tr>
		</tbody>
	  {{/each}}
	{{else}}
		<tr colspan=3>You have no shortened Urls</tr>
	{{/if}}
{{else}}
	{{#if urlInfo}}
	    <tr colspan=3>Your Short Link: <a target='_blank' href = '{{urlInfo.short}}'>{{urlInfo.short}}</a></tr>
	    <tr colspan=3>Original Link: {{urlInfo.long}}</tr>
	{{/if}}
{{/if}}
</table>
</template>
